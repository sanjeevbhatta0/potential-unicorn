AI Service - Complete Directory Structure
==========================================

ai-service/
│
├── app/                                    # Main application package
│   ├── __init__.py                        # Package initialization
│   │
│   ├── agents/                            # AI Agents
│   │   ├── __init__.py
│   │   ├── base_agent.py                  # Abstract base agent class
│   │   └── moderator.py                   # Content moderation agent
│   │
│   ├── api/                               # API layer
│   │   ├── __init__.py
│   │   └── v1/                            # API version 1
│   │       ├── __init__.py
│   │       ├── summarize.py               # Summarization endpoints
│   │       ├── translate.py               # Translation endpoints
│   │       └── moderate.py                # Moderation endpoints
│   │
│   ├── core/                              # Core configuration
│   │   ├── __init__.py
│   │   └── config.py                      # Settings & environment config
│   │
│   ├── models/                            # Data models
│   │   ├── __init__.py
│   │   └── article.py                     # Pydantic models (17 models)
│   │
│   ├── services/                          # Business logic layer
│   │   ├── __init__.py
│   │   ├── summarizer.py                  # Summarization service (Claude/OpenAI)
│   │   └── translator.py                  # Translation service (Claude/OpenAI)
│   │
│   ├── tasks/                             # Celery tasks
│   │   ├── __init__.py
│   │   ├── celery_app.py                  # Celery configuration & app
│   │   └── summarize_task.py              # Async summarization tasks
│   │
│   └── main.py                            # FastAPI application entry point
│
├── tests/                                  # Test suite
│   ├── __init__.py
│   ├── test_main.py                       # API endpoint tests
│   └── test_summarizer.py                 # Service layer tests
│
├── scripts/                                # Utility scripts
│   ├── start.sh                           # Service startup script (executable)
│   └── test-api.sh                        # API testing script (executable)
│
├── Configuration Files
├── pyproject.toml                          # Poetry dependencies & config
├── requirements.txt                        # Pip requirements (exported)
├── .env                                    # Environment variables (main)
├── .env.example                            # Environment template
├── .gitignore                              # Git ignore rules
├── pytest.ini                              # Pytest configuration
│
├── Docker Files
├── Dockerfile                              # Multi-stage Docker build
├── docker-compose.yml                      # Docker orchestration (4 services)
│
├── Development Tools
├── Makefile                                # Common development commands
│
└── Documentation
    ├── README.md                           # Complete documentation
    ├── QUICKSTART.md                       # 5-minute setup guide
    ├── PROJECT_SUMMARY.md                  # Project overview
    └── DIRECTORY_STRUCTURE.txt             # This file

Key Components by Purpose
==========================

CORE APPLICATION (app/main.py)
- FastAPI application setup
- CORS middleware
- GZip compression
- Request timing
- Exception handlers
- Health endpoints
- Router inclusion

AI SERVICES (app/services/)
- summarizer.py: Claude/OpenAI integration for summarization
  * Retry logic with exponential backoff
  * Multiple length options (short/medium/long)
  * Key points extraction
  * Multi-language support

- translator.py: Claude/OpenAI integration for translation
  * 10 language support
  * Auto language detection
  * Format preservation

AI AGENTS (app/agents/)
- base_agent.py: Abstract agent class
  * Provider abstraction
  * Execution methods for Claude/OpenAI
  * Context management

- moderator.py: Content moderation
  * 7 safety categories
  * Risk scoring
  * Action recommendations

API ENDPOINTS (app/api/v1/)
- summarize.py:
  * POST /api/v1/summarize (sync)
  * POST /api/v1/summarize/async (async with Celery)
  * GET /api/v1/summarize/status/{task_id}
  * POST /api/v1/summarize/batch

- translate.py:
  * POST /api/v1/translate
  * GET /api/v1/translate/languages
  * POST /api/v1/translate/detect
  * POST /api/v1/translate/batch

- moderate.py:
  * POST /api/v1/moderate

DATA MODELS (app/models/article.py)
- Request Models:
  * ArticleInput
  * SummarizeRequest
  * TranslateRequest
  * ModerationRequest

- Response Models:
  * SummarizeResponse
  * TranslateResponse
  * ModerationResponse
  * ModerationResult
  * TaskResponse
  * ErrorResponse

- Enums:
  * LanguageCode (10 languages)
  * SummaryLength (short/medium/long)
  * AIProvider (claude/openai)
  * ModerationCategory (7 categories)
  * TaskStatus (pending/processing/completed/failed)

TASK QUEUE (app/tasks/)
- celery_app.py:
  * Celery configuration
  * Task routing
  * Worker settings
  * Rate limiting
  * Periodic tasks setup

- summarize_task.py:
  * Async summarization task
  * Batch summarization task
  * Retry logic
  * Progress tracking

CONFIGURATION (app/core/config.py)
- Settings class with 20+ configurable options:
  * API configuration
  * Server settings
  * AI provider API keys
  * Model configuration
  * Celery settings
  * Redis configuration
  * CORS settings
  * Rate limiting
  * Retry configuration

DOCKER SETUP
- Dockerfile:
  * Multi-stage build
  * Python 3.11 slim
  * Non-root user
  * Health check

- docker-compose.yml:
  * redis: Message broker & result backend
  * api: FastAPI server
  * celery-worker: Task processor
  * celery-beat: Periodic tasks

File Count Summary
==================
Total Files: 36
- Python files (.py): 21
- Configuration files: 7
- Documentation files: 4
- Docker files: 2
- Scripts: 2

Line Count Summary
==================
Python Code: 2,077 lines
Total Lines (including comments/docs): ~3,500 lines

Dependencies
============
Core:
- fastapi==0.109.0
- uvicorn[standard]==0.27.0
- pydantic==2.6.0

AI:
- anthropic==0.18.0
- openai==1.12.0
- langchain==0.1.6

Task Queue:
- celery[redis]==5.3.4
- redis==5.0.1

Utilities:
- httpx==0.26.0
- beautifulsoup4==4.12.3
- tenacity==8.2.3
- loguru==0.7.2

Dev:
- pytest==7.4.4
- black==24.1.0
- ruff==0.1.13
- mypy==1.8.0

API Endpoints Overview
======================
Health:
- GET  /                    -> API info
- GET  /health              -> Health check
- GET  /ready               -> Readiness check

Summarization:
- POST /api/v1/summarize              -> Sync summarization
- POST /api/v1/summarize/async        -> Async summarization
- GET  /api/v1/summarize/status/{id}  -> Task status
- POST /api/v1/summarize/batch        -> Batch processing

Translation:
- POST /api/v1/translate              -> Translate text
- GET  /api/v1/translate/languages    -> List languages
- POST /api/v1/translate/detect       -> Detect language
- POST /api/v1/translate/batch        -> Batch translation

Moderation:
- POST /api/v1/moderate               -> Moderate content

Documentation:
- GET  /docs                -> Swagger UI
- GET  /redoc               -> ReDoc
- GET  /api/v1/openapi.json -> OpenAPI schema

Features Checklist
==================
✅ FastAPI application with CORS
✅ Health & readiness endpoints
✅ Article summarization (sync & async)
✅ Text translation (10 languages)
✅ Content moderation (7 categories)
✅ Celery task queue integration
✅ Redis message broker
✅ Claude API integration with retry logic
✅ OpenAI API integration with retry logic
✅ AI agent system (base + moderator)
✅ Pydantic models (17 models)
✅ Comprehensive error handling
✅ Structured logging (Loguru)
✅ Docker & Docker Compose
✅ Makefile for development
✅ Test suite (pytest)
✅ Type hints throughout
✅ Poetry dependency management
✅ Environment configuration
✅ Complete documentation
✅ Quick start guide
✅ Utility scripts

Production Ready Features
==========================
✅ Retry logic with exponential backoff
✅ Rate limiting configuration
✅ Request timeout handling
✅ Health checks
✅ Graceful shutdown
✅ Non-root Docker user
✅ Multi-stage Docker builds
✅ Error sanitization (debug mode)
✅ CORS configuration
✅ Response compression (GZip)
✅ Request timing headers
✅ Structured logging
✅ Type safety
✅ Input validation
✅ API documentation

End of Directory Structure
===========================
